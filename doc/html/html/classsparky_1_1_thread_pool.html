<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Sparky Engine: sparky::ThreadPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sparky Engine
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>sparky</b></li><li class="navelem"><a class="el" href="classsparky_1_1_thread_pool.html">ThreadPool</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsparky_1_1_thread_pool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sparky::ThreadPool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="threadpool_8hpp_source.html">threadpool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac153de2ca1a6b692c48e000c7891e439"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsparky_1_1_thread_pool.html#ac153de2ca1a6b692c48e000c7891e439">ThreadPool</a> (const unsigned int threads=std::thread::hardware_concurrency())</td></tr>
<tr class="memdesc:ac153de2ca1a6b692c48e000c7891e439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs the Thread Pool with a set amount of threads.  <a href="#ac153de2ca1a6b692c48e000c7891e439">More...</a><br /></td></tr>
<tr class="separator:ac153de2ca1a6b692c48e000c7891e439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54a60ab84b11b3bb6dcccea9ba4d841"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsparky_1_1_thread_pool.html#ae54a60ab84b11b3bb6dcccea9ba4d841">~ThreadPool</a> (void)</td></tr>
<tr class="memdesc:ae54a60ab84b11b3bb6dcccea9ba4d841"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destruction of the Thread Pool object.  <a href="#ae54a60ab84b11b3bb6dcccea9ba4d841">More...</a><br /></td></tr>
<tr class="separator:ae54a60ab84b11b3bb6dcccea9ba4d841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3faeacdbbab736f1461c7ea53739e34f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsparky_1_1_thread_pool.html#a3faeacdbbab736f1461c7ea53739e34f">addTask</a> (const std::function&lt; void()&gt; &amp;function)</td></tr>
<tr class="memdesc:a3faeacdbbab736f1461c7ea53739e34f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a task that an inactive thread will execute.  <a href="#a3faeacdbbab736f1461c7ea53739e34f">More...</a><br /></td></tr>
<tr class="separator:a3faeacdbbab736f1461c7ea53739e34f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ce7704a54be1f5b956d61bc6c0fc7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsparky_1_1_thread_pool.html#a24ce7704a54be1f5b956d61bc6c0fc7f">join</a> (void)</td></tr>
<tr class="memdesc:a24ce7704a54be1f5b956d61bc6c0fc7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Joins each thread back to the main thread.  <a href="#a24ce7704a54be1f5b956d61bc6c0fc7f">More...</a><br /></td></tr>
<tr class="separator:a24ce7704a54be1f5b956d61bc6c0fc7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Thread Pool is a convenience class for easily setting up multi-threaded applications and useability without having to over-complicate code bases and scatter locks. The thread pool will continuously run in the background of the application and process any tasks assigned to it.</p>
<p>This is useful for assigning tasks which may slow down certain elements of the engine, such as the chunk generation for the <a class="el" href="classsparky_1_1_voxel.html">Voxel</a> <a class="el" href="classsparky_1_1_world.html">World</a>. Below is an example of using the Pool without the Thread Manager.</p>
<p>Usage example: </p><div class="fragment"><div class="line"><span class="comment">// Create a pool with the maximum amount of threads.</span></div><div class="line"><a class="code" href="classsparky_1_1_thread_pool.html">sparky::ThreadPool</a> pool;</div><div class="line"></div><div class="line"><span class="comment">// Add a task using a lambda function.</span></div><div class="line"><span class="keywordtype">int</span> number = 5;</div><div class="line">pool.<a class="code" href="classsparky_1_1_thread_pool.html#a3faeacdbbab736f1461c7ea53739e34f">addTask</a>([&amp;number](<span class="keywordtype">int</span> num) { number = num; });</div><div class="line"></div><div class="line"><span class="comment">// Join the pool to the main thread.</span></div><div class="line">pool.<a class="code" href="classsparky_1_1_thread_pool.html#a24ce7704a54be1f5b956d61bc6c0fc7f">join</a>();</div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac153de2ca1a6b692c48e000c7891e439"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">sparky::ThreadPool::ThreadPool </td>
          <td>(</td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>threads</em> = <code>std::thread::hardware_concurrency()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs the Thread Pool with a set amount of threads. </p>
<p>Default constructor of the Thread Pool object instance. The amount of threads that the pool will utilise is set by default to the maximum that the hardware can utilise. The user can specify if they wish to use less threads for the pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threads</td><td>The amount of threads that the pool will utilise. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae54a60ab84b11b3bb6dcccea9ba4d841"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sparky::ThreadPool::~ThreadPool </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destruction of the Thread Pool object. </p>
<p>Default destruction of the Thread Pool object instance. This will make sure that all of the threads have stopped before joining them back to the main thread. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3faeacdbbab736f1461c7ea53739e34f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sparky::ThreadPool::addTask </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void()&gt; &amp;&#160;</td>
          <td class="paramname"><em>function</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a task that an inactive thread will execute. </p>
<p>Adds a task to the queue of tasks that are to be executed by the threads within the pool. If no threads are currently available, it is added to a queue and executed as soon as possible.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>The function that the threads will execute.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">future</td><td>The future result of the added task. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a24ce7704a54be1f5b956d61bc6c0fc7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sparky::ThreadPool::join </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Joins each thread back to the main thread. </p>
<p>This method is automatically called upon destruction of the Thread Pool. It joins all of the current threads within the pool and sets it stop multi-threading. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Ben/Documents/repos/sparky/include/sparky/utils/<a class="el" href="threadpool_8hpp_source.html">threadpool.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
